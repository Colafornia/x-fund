{"version":3,"sources":["components/numberDisplay.tsx","components/lineChart.tsx","utils/enum.ts","service/index.ts","components/fundLine.tsx","utils/common.ts","utils/rendered.tsx","components/fundList.tsx","hooks/useLocalStorage.ts","components/radarChart.tsx","components/similarity.tsx","reducers/index.ts","reducers/funds.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["NumberDisplay","props","isNegative","String","value","startsWith","displayValue","style","color","y","data","textMap","commonProp","legendProp","className","scale","date","type","range","formatter","val","tickCount","nice","lineDash","padding","autoFit","height","width","shape","position","size","name","grid","line","showCrosshairs","shared","crosshairs","timeRelative","timeRelativeList","label","hqKeys","title","key","rank1","rank2","window","url","callback","opt","cbnum","counter","cbname","indexOf","script","document","createElement","referrerPolicy","response","parentNode","removeChild","src","onload","body","appendChild","getStockValue","codes","a","query","forEach","code","Number","length","push","axios","get","join","then","resp","diff","searchFund","Promise","resolve","path","Date","now","fetchJsonp","json","result","Datas","map","item","CODE","NAME","getFundInfo","all","getValueInfo","getFundDetail","detail","stocks","JJCC","InverstPosition","fundStocks","stock","GPDM","stockValue","FCODE","getBenefitData2","moment","format","reduce","accum","fund","concat","getSingleBenefit","fundName","index","getBenefitInBulk","funds","flat","fundCode","useState","chartData","setChartData","setRange","indexCode","fetchData","start","subtract","days","Math","abs","startOf","filter","isAfter","useEffect","Group","onChange","e","target","marginBottom","marginLeft","time","Button","copyTextToClipboard","text","navigator","clipboard","writeText","err","textArea","top","left","focus","select","successful","execCommand","Boolean","fallbackCopyTextToClipboard","sendLog","stockColumns","record","stockValues","dataIndex","render","find","f12","f3","JZBL","PCTNVCHGTYPE","PCTNVCHG","zfColumns","syl","rank","sc","hqColumns","Option","Select","formatRMB","addWan","integer","number","mutiple","decimalDigit","digit","getDigit","remainder","round","pow","floor","unit","multiple","tmp","i","addChineseUnit","getTags","flatten","JJBQ","FEATYPE","TAGLIST","tag","FEATAG","FEANAME","v","listRendered","hide","rendered","JJXQ","FTYPE","BENCH","ENDNAV","COMMENTS","JDZF","list","pagination","columns","dataSource","TSSJ","connect","dispatch","firstUpdate","useRef","useParams","history","useHistory","initialValue","localStorage","getItem","JSON","parse","error","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","useLocalStorage","storage","setStorage","loading","setLoading","searchList","setSearchList","fundList","setFundList","sortedFundList","setSortedFundList","expandableList","setExpandableList","selectedRows","setSelectedRows","initFundList","split","useLayoutEffect","current","handleSearch","debounce","handleChange","some","info","message","warning","copyUrl","location","host","success","NAV","NAVCHGRT","PDATE","GSZ","GSZZL","GZTIME","sorter","_","onClick","includes","expand","marginRight","onConfirm","handleDelete","rowSelection","span","showSearch","placeholder","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","disabled","offset","textAlign","ReloadOutlined","CopyOutlined","expandIconColumnIndex","expandedRowKeys","expandable","expandedRowRender","allocation","SectorAllocation","industryData","Object","values","ZJZBL","gutter","itemLayout","renderItem","Item","Meta","description","marginTop","filters","order","columnKey","isNaN","sort","b","useHtml","items","radius","sortMap","mapObj","entries","freq","GPJC","state","stockSimilarity","setStockSimilarity","industrySimilarity","setIndustrySimilarity","industryRadarData","setIndustryRadarData","SHORTNAME","stockFreqMap","Map","industryFreqMap","stockObj","has","set","INDEXNAME","calculateSimilarity","stockRes","industryRes","listDom","fontSize","fontWeight","locale","emptyText","combineReducers","action","store","createStore","rootReducer","Content","Layout","App","console","log","minHeight","bordered","extra","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1e41a2ef.chunk.js","sourcesContent":["import React from 'react';\n\nexport default function NumberDisplay(props: any) {\n  const isNegative = String(props.value).startsWith('-');\n  const displayValue = isNegative ? props.value : `+${props.value}`;\n  return (\n  <span style={{ color: isNegative ? '#3f8600' : '#cf1322' }}>{displayValue}</span>\n  )\n};\n","import React from 'react';\nimport {\n  Chart,\n  Axis,\n  Tooltip,\n  Line,\n} from \"bizcharts\";\n\nexport default function (props) {\n  const { y = 'value', data, textMap, commonProp, legendProp } = props;\n  // const commonChartProp = commonProp?.chart || {\n  //   forceFit: true,\n  //   height: 450,\n  //   padding: [\n  //     20, 80, 100, 80\n  //   ],\n  // };\n\n\n  return (<div className=\"fund-line-chart\">\n    <Chart scale={{\n      date: {\n        type: 'timeCat',\n        range: [0, 1],\n      },\n      value: {\n        type: \"linear\",\n        formatter: val => {\n          return val + \"%\";\n        },\n        tickCount: 6,\n        nice: true,\n        lineDash: 2,\n      }\n    }} padding={[30, 20, 60, 40]} autoFit height={320} width={700} data={data}>\n      <Line\n        shape=\"smooth\"\n        position=\"date*value\"\n        color={['name', [\n          '#1890ff', '#91d5ff', '#faad14', '#a0d911', '#fa8c16', '#13c2c2', '#722ed1', '#eb2f96', '#bfbfbf', '#fadb14'\n        ]]}\n        size=\"2\"\n      />\n      <Axis name={y} grid={{\n        line: {\n          style: {\n            lineDash: [2, 2],\n          }\n        }\n      }} />\n      <Tooltip\n        showCrosshairs={true}\n        shared={true}\n        crosshairs={{\n          type: \"x\",\n        }} />\n    </Chart>\n  </div>)\n}\n","export const timeRelative = {\n  'Z': '近一周',\n  'Y': '近1月',\n  '3Y': '近3月',\n  '6Y': '近6月',\n  '1N': '近1年',\n  // '2N': '近2年',\n  '3N': '近3年',\n  '5N': '近五年',\n  'JN': '今年来',\n  'LN': '成立来',\n}\n\nexport const timeRelativeList = [\n  {\n    label: '近1月',\n    value: '-30',\n  }, {\n    label: '近3月',\n    value: '-90',\n  }, {\n    label: '近6月',\n    value: '',\n  },\n  // {\n  //   label: '近1年',\n  //   value: 'y',\n  // }, {\n  //   label: '近3年',\n  //   value: 'try',\n  // }, {\n  //   label: '近5年',\n  //   value: 'fiy',\n  // }, {\n  //   label: '今年',\n  //   value: 'sy',\n  // }, {\n  //   label: '成立以来',\n  //   value: 'se',\n  // }\n];\n\nexport const comparTimeRelativeList = [\n  {\n    label: '近1周',\n    value: 'week',\n  }, {\n    label: '近1月',\n    value: 'month',\n  }, {\n    label: '近3月',\n    value: 'threemonth',\n  }, {\n    label: '近6月',\n    value: 'sixmonth',\n  }, {\n    label: '近1年',\n    value: 'year',\n  }, {\n    label: '近3年',\n    value: 'threeyear',\n  }\n];\n\n// 指数列表\nexport const indexList = [\n  {\n    code: '000300',\n    name: '沪深300',\n  }, {\n    code: '000905',\n    name: '中证500',\n  }, {\n    code: '000001',\n    name: '上证指数',\n  }, {\n    code: '399001',\n    name: '深证成指',\n  }, {\n    code: '399006',\n    name: '创业板指',\n  }\n];\n\n// 行情数据枚举值\nexport const hqKeys = [{\n  title: '近1年夏普比率',\n  key: 'SHARP1',\n  rank1: 'SHARP_1NRANK',\n  rank2: 'SHARP_1NFSC'\n}, {\n  title: '近3年夏普比率',\n  key: 'SHARP3',\n  rank1: 'SHARP_3NRANK',\n  rank2: 'SHARP_3NFSC'\n}, {\n  title: '近5年夏普比率',\n  key: 'SHARP5',\n  rank1: 'SHARP_5NRANK',\n  rank2: 'SHARP_5NFSC'\n}, {\n  title: '近1年最大回撤（%）',\n  key: 'MAXRETRA1',\n  rank1: 'MAXRETRA_1NRANK',\n  rank2: 'MAXRETRA_1NFSC'\n}, {\n  title: '近3年最大回撤（%）',\n  key: 'MAXRETRA3',\n  rank1: 'MAXRETRA_3NRANK',\n  rank2: 'MAXRETRA_3NFSC'\n}, {\n  title: '近5年最大回撤（%）',\n  key: 'MAXRETRA5',\n  rank1: 'MAXRETRA_5NRANK',\n  rank2: 'MAXRETRA_5NFSC'\n}, {\n  title: '近1年波动率（%）',\n  key: 'STDDEV1',\n  rank1: 'STDDEV_1NRANK',\n  rank2: 'STDDEV_1NFSC'\n},{\n  title: '近3年波动率（%）',\n  key: 'STDDEV3',\n  rank1: 'STDDEV_3NRANK',\n  rank2: 'STDDEV_3NFSC'\n},{\n  title: '近5年波动率（%）',\n  key: 'STDDEV5',\n  rank1: 'STDDEV_5NRANK',\n  rank2: 'STDDEV_5NFSC'\n},]\n","import fetchJsonp from 'fetch-jsonp';\nimport axios from 'axios';\nimport moment from 'moment';\n\n// 基金对象信息\nexport interface FundInfo {\n  code: string\n  name: string\n}\n\nwindow['getJSONP'] = (url: string, callback: Function, opt?: {\n  onload?: Function\n}) => {\n  var cbnum = \"cb\" + window['getJSONP'].counter++;\n  var cbname = \"getJSONP.\" + cbnum;\n\n  if (url.indexOf(\"?\") == -1) {\n    url += \"?callback=\" + cbname;\n    url += \"?cb=\" + cbname;\n  } else {\n    url += \"&callback=\" + cbname;\n    url += \"&cb=\" + cbname;\n  }\n\n  var script = document.createElement(\"script\");\n  script.referrerPolicy = \"no-referrer\";\n  window['getJSONP'][cbnum] = function (response) {\n    try {\n      callback(response);\n    }\n    finally {\n      delete window['getJSONP'][cbnum];\n      script.parentNode!.removeChild(script);\n    }\n  };\n\n  script.src = url\n  if (opt && opt.onload) {\n    script.onload = () => {\n      opt.onload!()\n    }\n  }\n  document.body.appendChild(script);\n}\nwindow['getJSONP'].counter = 0;\n\n// 股票实时净值\nexport const getStockValue = async (codes: string[]) => {\n  const path = 'https://push2.eastmoney.com/api/qt/ulist.np/get?fltt=2&invt=2&fields=f2,f3,f12,f14,f9&ut=267f9ad526dbe6b0262ab19316f5a25b&secids=';\n  let query = [] as string[];\n  codes.forEach((code) => {\n    if (Number(code) > 0 && code.length === 6) {\n      query.push(String(code).startsWith('6') ? `1.${code}` : `0.${code}`);\n    }\n  });\n  return axios.get(path + query.join(','))\n    .then((resp) => {\n      return resp.data?.data?.diff || [];\n    })\n}\n\n// 基金搜索\nexport const searchFund = async (key: string): Promise<FundInfo[]> => {\n  return new Promise((resolve) => {\n    const path = `https://fundsuggest.eastmoney.com/FundSearch/api/FundSearchAPI.ashx?m=10&t=700&IsNeedBaseInfo=0&IsNeedZTInfo=0&key=${key}&_=${Date.now()}`\n\n    fetchJsonp(path)\n      .then(function (response) {\n        return response.json()\n      })\n      .then((resp: any) => {\n        const result = resp.Datas?.map(item => {\n          return {\n            code: item.CODE,\n            name: item.NAME\n          }\n        }) || [];\n        resolve(result);\n      })\n  })\n}\n\nexport const getFundInfo = async (code: string): Promise<any> => {\n  return new Promise((resolve) => {\n    Promise.all([getValueInfo(code), getFundDetail(code)])\n      .then(async ([value, detail]) => {\n        const stocks = detail?.JJCC?.Datas?.InverstPosition.fundStocks || [];\n        const stockValue = await getStockValue(stocks.map(stock => stock.GPDM));\n        resolve({\n          ...value,\n          ...detail,\n          key: value.FCODE,\n          stockValue,\n        });\n      })\n  })\n}\n\n// 基金基本信息 净值估值\nexport const getValueInfo = async (code: string): Promise<any> => {\n  const path = `https://fundmobapi.eastmoney.com/FundMNewApi/FundMNFInfo?pageIndex=1&pageSize=13&appType=ttjj&product=EFund&plat=Android&deviceid=6ed83de02a321t185jqqoja&Version=1&Fcodes=${code}`;\n  return axios.get(path)\n    .then(({ data }) => {\n      return data?.Datas[0];\n    })\n}\n\n// 详情信息\nexport const getFundDetail = async (code: string) => {\n  const path = `https://j5.dfcfw.com/sc/tfs/qt/v2.0.1/${code}.json`;\n  return axios.get(path)\n    .then(({ data }) => {\n      return data;\n    })\n}\n\n// 单支基金收益率数据 基金-同类平均-指数\nexport const getBenefitData = async (code: string, indexCode: string = '000300', type: string = 'q') => {\n  const path = `https://api.fund.eastmoney.com/pinzhong/LJSYLZS?fundCode=${code}&indexcode=${indexCode}&type=${type}&_=${Date.now()}`;\n  return window['getJSONP'](path, (resp) => {\n    const data = resp?.Data?.length ? resp.Data : [];\n    return data?.reduce((accum, fund) => {\n      const name = fund.name;\n      return accum.concat(fund.data.map((item) => ({\n        name,\n        date: moment(item[0]).format('YYYY-MM-DD'),\n        value: item[1],\n      })));\n    }, []) || [];\n  })\n}\n\nexport const getComparedBenefit = async (codes: string[], type: string = 'threeyear') => {\n  const path = `https://api.fund.eastmoney.com/FundCompare/LJSYL?bzdm=${codes.join(',')}&c=${type}&_=${Date.now()}`;\n  return window['getJSONP'](path, (resp) => {\n    const data = resp?.Data?.length ? resp.Data : [];\n    const obj = JSON.parse(data)\n    const graph = obj?.graph || [];\n    const dataProvider = obj?.dataProvider || [];\n    const fundMap = {};\n    graph.forEach(fund => {\n      fundMap[fund.valueField] = fund.name;\n    });\n    return dataProvider.reduce((accum, item) => {\n      const curData = codes.map((code) => ({\n        name: fundMap[code],\n        date: item.date,\n        value: item[code],\n      }));\n      return accum.concat(curData);\n    }, []);\n  })\n}\n\nexport const getBenefitData2 = async (code: string) => {\n  const path = `https://fund.eastmoney.com/pingzhongdata/${code}.js?v=${moment().format('yyyyMMddHHmmss')}`;\n  return new Promise((resolve) => {\n    window['getJSONP'](path, (resp) => {\n    }, {\n      onload: () => {\n        const data: any[] = window['Data_grandTotal'] || [] // 历史净值\n        resolve(data.reduce((accum, fund) => {\n          const name = fund.name;\n          return accum.concat(fund.data.map((item) => ({\n            name,\n            date: moment(item[0]).format('YYYY-MM-DD'),\n            value: item[1],\n          })));\n        }, []) || []);\n      }\n    })\n\n  })\n}\n\nexport const getSingleBenefit = async (code: string, fundName: string, index: Number) => {\n  const path = `https://fund.eastmoney.com/pingzhongdata/${code}.js?v=${moment().format('yyyyMMddHHmmss')}`;\n  return new Promise((resolve) => {\n    window['getJSONP'](path, (resp) => {\n    }, {\n      onload: () => {\n        const data: any[] = window['Data_grandTotal'] || [] // 历史净值\n        resolve(data.reduce((accum, fund) => {\n          const name = fund.name;\n          // 沪深数据只加一次\n          const isIndex = index === 0 && name === '沪深300';\n          if (name === fundName || isIndex) {\n            return accum.concat(fund.data.map((item) => ({\n              name,\n              date: moment(item[0]).format('YYYY-MM-DD'),\n              value: item[1],\n            })));\n          }\n          return accum;\n        }, []) || []);\n      }\n    })\n  })\n}\n\nexport const getBenefitInBulk = async (funds: any[]) => {\n  return Promise.all(funds.map((fund, index) => getSingleBenefit(fund.code, fund.name, index)))\n    .then((data = []) => {\n      return data.flat();\n    })\n}\n\n\n","import React, { useState, useEffect } from 'react';\nimport { Radio } from 'antd';\nimport LineChart from './lineChart';\nimport { timeRelativeList } from 'src/utils/enum';\nimport { getBenefitData2 } from 'src/service';\nimport moment from 'moment';\n\nexport default function (props) {\n  const { fundCode } = props;\n  const [chartData, setChartData] = useState([] as any);\n  const [range, setRange] = useState('');\n  const [indexCode, setIndexCode] = useState('000300');\n\n  const fetchData = async () => {\n    const data: any = await getBenefitData2(fundCode);\n    const start = moment().subtract({days: Math.abs(Number(range))}).startOf('day');\n    setChartData(range ? data.filter((item) => moment(item.date).isAfter(start)) : data);\n  }\n\n  useEffect(() => {\n    fetchData();\n  }, [range, indexCode]);\n\n  const handleRangeChange = (e) => {\n    setRange(e.target.value);\n  }\n\n  const handleIndexChange = (value: string) => {\n    setIndexCode(value);\n  }\n\n  return (<div className=\"fund-line-chart\">\n    {/* <Select style={{ width: 120 }} value={indexCode} onChange={handleIndexChange}>\n      {indexList.map((index) => (\n        <Select.Option key={index.code} value={index.code}>{index.name}</Select.Option>\n      ))}\n    </Select> */}\n\n    <Radio.Group value={range} onChange={handleRangeChange} style={{ marginBottom: 16, marginLeft: 12 }}>\n      {timeRelativeList.map(\n        (time) => (\n        <Radio.Button\n          key={time.value}\n          value={time.value}\n        >\n          {time.label}\n        </Radio.Button>\n      ))}\n    </Radio.Group>\n    {chartData?.length ? <LineChart data={chartData} /> : '暂无数据'}\n  </div>)\n}\n","/**\n * 数字四舍五入同时保留几位小数\n * @param num 数字\n * @param fractionDigits 保留几位小数\n */\nexport const roundToFix = (num: number | string, fractionDigits: number = 2): number => {\n  const powNum = Math.pow(10, fractionDigits)\n  return Number((Math.round(Number(num) * powNum) / powNum).toFixed(fractionDigits))\n}\n\nfunction fallbackCopyTextToClipboard(text) {\n  let result = true;\n  const textArea = document.createElement(\"textarea\");\n  textArea.value = text;\n\n  // Avoid scrolling to bottom\n  textArea.style.top = \"0\";\n  textArea.style.left = \"0\";\n  textArea.style.position = \"fixed\";\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  try {\n    const successful = document.execCommand('copy');\n    result = Boolean(successful);\n  } catch (err) {\n    result = false;\n  }\n\n  document.body.removeChild(textArea);\n  return result;\n}\nexport function copyTextToClipboard(text) {\n  return new Promise((resolve) => {\n    if (!navigator.clipboard) {\n      resolve(fallbackCopyTextToClipboard(text));\n      return;\n    }\n    navigator.clipboard.writeText(text).then(function() {\n      resolve(true);\n    }, function(err) {\n      resolve(false);\n    });\n  })\n}\n\nexport function sendLog(value) {\n  try {\n    window['_hmt'].push(['_trackEvent', 'fundlist', 'click', value]);\n    window['logEvent']?.('select_content', {\n      value,\n    });\n  } catch(e) {};\n}\n\n/**\n * 为数字加上单位：万或亿\n *\n * 例如：\n *      1000.01 => 1000.01\n *      10000 => 1万\n *      99000 => 9.9万\n *      566000 => 56.6万\n *      5660000 => 566万\n *      44440000 => 4444万\n *      11111000 => 1111.1万\n *      444400000 => 4.44亿\n *      40000000,00000000,00000000 => 4000万亿亿\n *      4,00000000,00000000,00000000 => 4亿亿亿\n *\n * @param {number} number 输入数字.\n * @param {number} decimalDigit 小数点后最多位数，默认为2\n * @return {string} 加上单位后的数字\n */\nexport const addChineseUnit = () => {\n  const addWan = function (integer, number, mutiple, decimalDigit) {\n    const digit = getDigit(integer);\n    if (digit > 3) {\n      let remainder = digit % 8;\n      if (remainder >= 5) {   // ‘十万’、‘百万’、‘千万’显示为‘万’\n        remainder = 4;\n      }\n      return Math.round(number / Math.pow(10, remainder + mutiple - decimalDigit)) / Math.pow(10, decimalDigit) + '万';\n    } else {\n      return Math.round(number / Math.pow(10, mutiple - decimalDigit)) / Math.pow(10, decimalDigit);\n    }\n  };\n\n  const getDigit = function (integer) {\n    let digit = -1;\n    while (integer >= 1) {\n      digit++;\n      integer = integer / 10;\n    }\n    return digit;\n  };\n\n  return function (number, decimalDigit) {\n    decimalDigit = decimalDigit == null ? 2 : decimalDigit;\n    const integer = Math.floor(number);\n    const digit = getDigit(integer);\n    // ['个', '十', '百', '千', '万', '十万', '百万', '千万'];\n    const unit = [] as any[];\n    if (digit > 3) {\n      const multiple = Math.floor(digit / 8);\n      if (multiple >= 1) {\n        const tmp = Math.round(integer / Math.pow(10, 8 * multiple));\n        unit.push(addWan(tmp, number, 8 * multiple, decimalDigit));\n        for (let i = 0; i < multiple; i++) {\n          unit.push('亿');\n        }\n        return unit.join('');\n      } else {\n        return addWan(integer, number, 0, decimalDigit);\n      }\n    } else {\n      return number;\n    }\n  };\n};\n\n","import React from 'react';\nimport NumberDisplay from 'src/components/numberDisplay';\nimport { timeRelative } from 'src/utils/enum';\n\n// 持仓行业\nexport const industryColumns = () => {\n  return [\n    {\n      title: '行业名称',\n      key: 'name',\n      dataIndex: 'HYMC',\n    },\n    {\n      title: '占比',\n      key: 'percent',\n      render: (item) => `${item.ZJZBL}%`,\n    },\n    {\n      title: '数据日期',\n      key: 'date',\n      dataIndex: 'FSRQ',\n    },\n  ]\n};\n\n// 持仓股票数据\nexport const stockColumns = (record) => {\n  const stockValues = record.stockValue || [];\n  return [\n    {\n      title: '股票代码',\n      key: 'code',\n      dataIndex: 'GPDM',\n    },\n    {\n      title: '股票名称',\n      key: 'name',\n      dataIndex: 'GPJC',\n    },\n    {\n      title: '涨跌幅',\n      key: 'value',\n      render: (item) => {\n        const value = stockValues.find((stock) => stock.f12 === item.GPDM)?.f3;\n        return <NumberDisplay value={value ? value + '%' : '-'} />\n      },\n    },\n    {\n      title: '持仓占比',\n      key: 'percent',\n      render: (item) => `${item.JZBL}%`,\n    },\n    {\n      title: '行业',\n      key: 'industry',\n      dataIndex: 'INDEXNAME',\n    },\n    {\n      title: '较上期持仓变化',\n      key: 'change',\n      render: (item) => `${item.PCTNVCHGTYPE} ${item.PCTNVCHG}%`,\n    },\n  ]\n};\n\n// 阶段涨幅\nexport const zfColumns = [\n  {\n    title: '时间区间',\n    key: 'title',\n    render: (item) => timeRelative[item.title],\n  },\n  {\n    title: '收益率',\n    key: 'syl',\n    render: (item) => <NumberDisplay value={item.syl+ '%'} />,\n  },\n  {\n    title: '同类排行',\n    key: 'rank',\n    render: (item) => `${item.rank || '-'}/${item.sc || '-'}`,\n  },\n];\n\n// 行情\nexport const hqColumns = [\n  {\n    title: '名称',\n    key: 'title',\n    dataIndex: 'title',\n  },\n  {\n    title: '数据',\n    key: 'value',\n    dataIndex: 'value',\n  },\n  {\n    title: '排名',\n    key: 'rank',\n    dataIndex: 'rank',\n  }\n];","import React, { useState, useEffect, useLayoutEffect, useRef } from 'react';\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { connect } from 'react-redux'\nimport useLocalStorage from 'src/hooks/useLocalStorage';\nimport { Select, Table, Popconfirm, Tag, List, Row, Col, Card, Tooltip, Button, message } from 'antd';\nimport { ReloadOutlined, CopyOutlined } from '@ant-design/icons';\nimport NumberDisplay from './numberDisplay';\nimport FundLine from './fundLine';\nimport { searchFund, getFundInfo } from 'src/service';\nimport { sendLog, addChineseUnit, copyTextToClipboard } from 'src/utils/common';\nimport { timeRelative, hqKeys } from 'src/utils/enum';\n// @ts-ignore\nimport { industryColumns, stockColumns, zfColumns, hqColumns } from 'src/utils/rendered.tsx';\nimport { debounce, flatten } from 'lodash';\n\nconst { Option } = Select;\n\n\nconst formatRMB = addChineseUnit();\n\nconst getTags = (record) => {\n  return flatten(record.JJBQ?.Datas?.map((data) => {\n    if (Number(data.FEATYPE) < 3) {\n      return data.TAGLIST.map((tag) => tag.FEATAG !== '--' ? tag.FEATAG : tag.FEANAME);\n    }\n    return '';\n  }).filter(v => Boolean(v)));\n}\n\nconst listRendered = (record) => {\n  return [\n    {\n      label: '标签',\n      hide: !getTags(record).length,\n      rendered: () => getTags(record).map(\n        (tag) => <Tag key={tag} color=\"processing\">{ tag }</Tag>\n      ),\n    },\n    {\n      label: '基金类型',\n      rendered: () => record.JJXQ.Datas.FTYPE,\n    },\n    {\n      label: '业绩比较基准',\n      rendered: () => record.JJXQ.Datas.BENCH,\n    },\n    {\n      label: '基金规模（元）',\n      rendered: () => formatRMB(record.JJXQ.Datas.ENDNAV, 2),\n    },\n    {\n      label: '特点',\n      rendered: () => record.JJXQ.Datas.COMMENTS,\n    },\n    {\n      label: '阶段涨幅',\n      hide: !record.JDZF.Datas.length,\n      rendered: () => {\n        const list = record.JDZF.Datas.filter(item => Boolean(timeRelative[item.title]));\n        return (<Table\n          pagination={false}\n          className=\"fund-detail-jd\"\n          columns={zfColumns}\n          dataSource={list}\n        />)\n      },\n    },\n    {\n      label: '行情数据',\n      rendered: () => {\n        const dataSource = record.TSSJ.Datas;\n        const list = hqKeys.map((item) => {\n          return {\n            key: item.title,\n            title: item.title,\n            value: dataSource[item.key] || '-',\n            rank: `${dataSource[item.rank1] || '-'}/${dataSource[item.rank2] || '-'}`,\n          }\n        });\n        return (<Table\n          pagination={false}\n          className=\"fund-detail-jd\"\n          columns={hqColumns}\n          dataSource={list}\n        />)\n      },\n    },\n  ];\n};\n\n\nfunction FundList({ dispatch }) {\n  const firstUpdate = useRef(true);\n  const { codes = [] } = useParams();\n  const history = useHistory();\n  const [ storage, setStorage ] = useLocalStorage('_storageCodes', [] as any[]);\n  const [loading, setLoading] = useState(false);\n  const [searchList, setSearchList] = useState([] as any[]);\n  const [fundList, setFundList] = useState([] as any[]);\n  const [sortedFundList, setSortedFundList] = useState(fundList);\n  const [expandableList, setExpandableList] = useState([] as any[]);\n  const [selectedRows, setSelectedRows] = useState([] as any[]);\n\n  const initFundList = async (codes) => {\n    setLoading(true);\n    const result = await Promise.all(codes.map(code => getFundInfo(code)));\n    setFundList(result);\n    setSortedFundList(result);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    if (codes && codes.length && codes.split(',')?.length) {\n      initFundList(codes.split(','));\n      sendLog(`init fund width params: ${codes}`);\n    } else if (storage.length) {\n      initFundList(storage);\n      sendLog(`init fund width storage: ${storage}`);\n    }\n  }, []);\n\n  useLayoutEffect(() => {\n    if (firstUpdate.current) {\n      firstUpdate.current = false;\n      return;\n    }\n    setStorage(fundList.map(item => item.key));\n  }, [fundList.length]);\n\n\n  const handleSearch = debounce(async (key) => {\n    const list = await searchFund(key);\n    setSearchList(list);\n  }, 300)\n\n  const handleChange = async (code) => {\n    if (!fundList.some((fund) => fund.FCODE === code)) {\n      const info = await getFundInfo(code);\n      setFundList([info].concat(fundList));\n      setSortedFundList([info].concat(sortedFundList))\n    } else {\n      message.warning(`基金 ${code} 已在列表中`);\n    }\n  }\n\n  const handleDelete = (code: string) => {\n    const list = [...fundList];\n    setFundList(list.filter(item => item.FCODE !== code));\n    setSortedFundList([...sortedFundList].filter(item => item.FCODE !== code));\n  }\n\n  const refresh = () => {\n    initFundList(fundList.map((fund) => fund.key));\n    sendLog(`refresh fund list: ${fundList.map(item => item.key).join(',')}`);\n  }\n\n  const expand = (record) => {\n    if (expandableList.includes(record.key)) {\n      setExpandableList(expandableList.filter(key => key !== record.key));\n    } else {\n      setExpandableList([record.key].concat(expandableList));\n    }\n  }\n\n  const copyUrl = async () => {\n    const url = `https://${window.location.host}/x-fund/#/${fundList.map((fund) => fund.key).join(',')}`;\n    const isSuccess = await copyTextToClipboard(url);\n    if (isSuccess) {\n      message.success('已复制到剪贴板');\n    } else {\n      message.error('由于浏览器兼容性，复制失败，请手动复制 ' + url);\n    }\n  }\n\n  const expandedRowRender = (record) => {\n    const allocation = record?.JJCC?.Datas?.SectorAllocation || {};\n    let industryData = (Object.values(allocation)?.[0] || []) as any[];\n    industryData = industryData.filter(item => Number(item.ZJZBL) > 0);\n\n    return (\n      <Row gutter={16}>\n        <Col span={8} className=\"table-nested-col\">\n          <Card>\n            <List\n            itemLayout=\"horizontal\"\n            dataSource={listRendered(record)}\n            renderItem={item => (\n              <List.Item>\n                {item.hide ? null : <List.Item.Meta\n                  title={item.label}\n                  description={item.rendered()}\n                />}\n              </List.Item>\n            )}\n          />\n          </Card>\n        </Col>\n        <Col span={16} className=\"table-nested-col\">\n          <Card title=\"累积收益率走势\">\n            <FundLine fundCode={record.FCODE} />\n          </Card>\n          <Card title=\"基金持仓\">\n            <Table\n              pagination={false}\n              className=\"fund-stock-list\"\n              columns={stockColumns(record)}\n              dataSource={record.JJCC?.Datas?.InverstPosition.fundStocks || []}\n              />\n            </Card>\n            <Card title=\"持仓行业占比\" style={{marginTop: 16}}>\n              <Table\n                pagination={false}\n                className=\"fund-industry-list\"\n                columns={industryColumns()}\n                dataSource={industryData}\n                />\n            </Card>\n        </Col>\n      </Row>\n    )\n  }\n\n  const columns = [\n    { title: '基金代码', dataIndex: 'FCODE', key: 'code' },\n    { title: '基金名称', dataIndex: 'SHORTNAME', key: 'name' },\n    { title: '净值', key: 'value', render: (record) => (<>\n      <div>{record.NAV}</div>\n      <div><NumberDisplay value={record.NAVCHGRT+ '%'} /></div>\n      <div>日期：{record.PDATE}</div>\n    </>) },\n    { title: '估值', key: 'gz', render: (record) => (<>\n      <div>{record.GSZ}</div>\n      <div><NumberDisplay value={record.GSZZL+ '%'} /></div>\n      <div>更新时间：{record.GZTIME}</div>\n    </>), sorter: true },\n    { title: 'Operation', key: 'operation', render: (_, record: { FCODE: string, key: string }) => (\n      <>\n      <a onClick={() => expand(record)} style={{marginRight: 8}}>\n        {expandableList.includes(record.key) ? '收起' : '查看更多'}\n      </a>\n      <Popconfirm title=\"Sure to delete?\" onConfirm={() => handleDelete(record.FCODE)}>\n        <a>删除</a>\n      </Popconfirm>\n      </>\n    ) },\n  ];\n\n  const handleTableChange = (pagination, filters, sorter) => {\n    const { order, columnKey } = sorter;\n    if (columnKey === 'gz') {\n      let list = [...fundList];\n      if (order) {\n        list = sortedFundList.filter((fund) => !isNaN(fund.GSZZL)).sort(\n          (a, b) => order === 'ascend' ? (a.GSZZL - b.GSZZL) : (b.GSZZL - a.GSZZL)\n        );\n        if (order === 'ascend') {\n          list = sortedFundList.filter((fund) => isNaN(fund.GSZZL)).concat(list);\n        } else {\n          list = list.concat(sortedFundList.filter((fund) => isNaN(fund.GSZZL)));\n        }\n      }\n      setSortedFundList(list);\n    }\n  }\n\n  const goSimilarity = () => {\n    sendLog(`similarity: ${selectedRows.map(item => item.key).join(',')}`);\n    history.push('/similarity');\n  }\n\n  const rowSelection = {\n    onChange: (_, selectedRows) => {\n      setSelectedRows(selectedRows);\n      dispatch({\n        type: 'UPDATE',\n        funds: selectedRows,\n      });\n    },\n  };\n\n  return (\n    <div className=\"fund-list\">\n      <Row>\n        <Col span={8}>\n            <Select\n            showSearch\n            style={{ width: 200, marginBottom: 16, }}\n            placeholder='输入基金名称或代码搜索'\n            defaultActiveFirstOption={false}\n            showArrow={false}\n            filterOption={false}\n            onSearch={handleSearch}\n            onChange={handleChange}\n            notFoundContent={null}\n          >\n            {searchList.map((fund) => <Option key={fund.code} value={fund.code}>{fund.name}</Option>)}\n          </Select>\n          <Tooltip title='选中2支以上可进行对比分析'>\n            <Button\n              disabled={selectedRows.length < 2}\n              onClick={() => goSimilarity()}\n              style={{ marginLeft: 8 }}>\n                分析持仓相似度\n            </Button>\n          </Tooltip>\n        </Col>\n        <Col offset={8} span={7} style={{textAlign: 'right'}}>\n          <Tooltip title='刷新数据'>\n            <ReloadOutlined style={{marginRight: 8}} onClick={() => refresh()} />\n          </Tooltip>\n          <Tooltip title='如果你想跨设备/浏览器来查询已选的基金，请点击复制网址到粘贴板进行访问'>\n            <CopyOutlined onClick={() => copyUrl()} />\n          </Tooltip>\n        </Col>\n      </Row>\n      <Table\n        pagination={false}\n        loading={loading}\n        className=\"fund-list-nested\"\n        expandIconColumnIndex={-1}\n        rowSelection={rowSelection}\n        expandedRowKeys={expandableList}\n        columns={columns}\n        expandable={{ expandedRowRender }}\n        dataSource={sortedFundList}\n        onChange={handleTableChange}\n      />\n    </div>\n  );\n}\n\nexport default connect()(FundList);\n","import { useState } from \"react\";\n\n// Hook\nexport default function useLocalStorage<T>(key: string, initialValue: T) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      return initialValue;\n    }\n  });\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value: T | ((val: T) => T)) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n    }\n  };\n  return [storedValue, setValue] as const;\n}\n","import React from 'react';\nimport {\n  Chart,\n  Coordinate,\n  Line,\n  Tooltip,\n} from \"bizcharts\";\n\nexport default function (props) {\n  const { data, formatter } = props;\n\n  return (<div className=\"fund-radar-chart\">\n    <Chart\n    height={320}\n    data={data}\n    autoFit\n    scale={{\n      value:{\n        nice: true,\n      }\n    }}\n   >\n    <Tooltip useHtml>\n      {(title, items: any) => formatter(title, items[0]?.value, items[0]?.data || {})}\n    </Tooltip>\n    <Coordinate type=\"polar\" radius={0.8} />\n    <Line\n      position=\"name*value\"\n      size=\"2\"\n    />\n   </Chart>\n  </div>)\n}\n","import React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\nimport { Table, Card, Row, Col, Radio } from 'antd';\nimport RadarChart from './radarChart';\nimport LineChart from './lineChart';\nimport { getBenefitInBulk } from 'src/service'\nimport { timeRelativeList } from 'src/utils/enum'\n\nconst sortMap = (mapObj) => {\n  let list = [] as any[];\n  for (let [key, value] of mapObj.entries()) {\n    list.push({\n      key,\n      ...value,\n    })\n  }\n  return list.filter((item) => item.freq > 1).sort((a, b) => b.freq - a.freq);\n}\n\nconst calculateSimilarity = (funds): any[] => {\n  const stockFreqMap = new Map();\n  const industryFreqMap = new Map();\n  funds.forEach((fund) => {\n    if (fund.stocks?.length) {\n      fund.stocks.forEach((stockObj) => {\n        const stock = {\n          fundName: fund.name,\n          ...stockObj,\n        };\n        // 股票集中度\n        if (!stockFreqMap.has(stock.GPJC)) {\n          stockFreqMap.set(stock.GPJC, {\n            freq: 1,\n            list: [stock],\n          })\n        } else {\n          stockFreqMap.set(stock.GPJC, {\n            freq: stockFreqMap.get(stock.GPJC).freq + 1,\n            list: [stock].concat(stockFreqMap.get(stock.GPJC).list),\n          });\n        }\n        // 行业集中度\n        if (stock.INDEXNAME && stock.INDEXNAME !== '--' && !industryFreqMap.has(stock.INDEXNAME)) {\n          industryFreqMap.set(stock.INDEXNAME, {\n            freq: 1,\n            list: [stock],\n          })\n        } else if (stock.INDEXNAME && stock.INDEXNAME !== '--') {\n          industryFreqMap.set(stock.INDEXNAME, {\n            freq: industryFreqMap.get(stock.INDEXNAME).freq + 1,\n            list: [stock].concat(industryFreqMap.get(stock.INDEXNAME).list),\n          })\n        }\n      })\n    }\n  })\n  return [sortMap(stockFreqMap), sortMap(industryFreqMap)];\n};\n\nconst stockColumns = (type = 'stock') => [\n  {\n    title: type === 'stock' ? '股票名称' : '行业名称',\n    key: 'name',\n    dataIndex: 'key'\n  }, {\n    title: '重复次数',\n    key: 'freq',\n    dataIndex: 'freq'\n  }, {\n    title: '详情',\n    key: 'detail',\n    render: (item) => item.list.map((stock) => (\n    <div key={stock.fundName + stock.GPDM}>{stock.fundName} : {stock.GPJC}({stock.GPDM}) 持仓比例： {stock.JZBL + '%'}</div>\n    )),\n  }\n];\n\nfunction Similarity({ funds = [] as any[] }) {\n  const [loading, setLoading] = useState(false);\n  const [stockSimilarity, setStockSimilarity] = useState([] as any[]);\n  const [industrySimilarity, setIndustrySimilarity] = useState([] as any[]);\n  const [industryRadarData, setIndustryRadarData] = useState([] as any[]);\n  const [range, setRange] = useState('')\n  const [chartData, setChartData] = useState([] as any[]);\n\n  const fetchData = async () => {\n    const data = await getBenefitInBulk(funds.map(fund => ({\n      code: fund.FCODE,\n      name: fund.SHORTNAME\n    })));\n    const start = moment().subtract({days: Math.abs(Number(range))}).startOf('day');\n    setChartData(range ? data.filter((item: any) => moment(item.date).isAfter(start)) : data);\n  }\n\n  useEffect(() => {\n    fetchData();\n  }, [range]);\n\n  useEffect(() => {\n    setLoading(true);\n    try {\n      const list = funds.map((fund: any) => ({\n        code: fund.FCODE,\n        name: fund.SHORTNAME,\n        stocks: fund?.JJCC?.Datas?.InverstPosition?.fundStocks || [],\n      }));\n      fetchData();\n      const [stockRes, industryRes ] = calculateSimilarity(list);\n      setStockSimilarity(stockRes);\n      setIndustrySimilarity(industryRes);\n      setIndustryRadarData(industryRes.map((item) => (\n        {\n          name: item.key,\n          value: item.freq,\n          list: item.list,\n        }\n      )));\n    } catch(e) {};\n    setLoading(false);\n  }, []);\n\n  const handleRangeChange = (e) => {\n    setRange(e.target.value);\n  }\n\n  const radarTooltipFormatter = (title, value, items) => {\n    const listDom = items.list.map((stock) => <div style={{marginBottom: 8}} key={stock.fundName+stock.GPDM}>\n      {stock.fundName} : {stock.GPJC}({stock.GPDM}) 持仓比例： {stock.JZBL + '%'}\n    </div>)\n    return (<div style={{padding: '8px 8px 0 8px'}}>\n      <div style={{marginBottom: 10, fontSize: 13, fontWeight: 500}}>\n        {title}\n        <span> {value}次</span>\n      </div>\n    {listDom}\n    </div>);\n  }\n\n  return (\n    <div className=\"fund-similarity\">\n      <Card title=\"集中度分析\">\n        分析基金：{ funds.map(fund => fund.SHORTNAME).join(' | ')}\n      </Card>\n      <Card title=\"可视化结果\" style={{marginTop: 16}}>\n        <Row>\n          <Col span={6}>\n            <RadarChart data={industryRadarData} formatter={radarTooltipFormatter} />\n          </Col>\n          <Col span={8} offset={2}>\n          <Radio.Group value={range} onChange={handleRangeChange} style={{ marginBottom: 16 }}>\n            {timeRelativeList.map(\n              (time) => (\n              <Radio.Button\n                key={time.value}\n                value={time.value}\n              >\n                {time.label}\n              </Radio.Button>\n            ))}\n          </Radio.Group>\n            <LineChart data={chartData} />\n          </Col>\n        </Row>\n      </Card>\n      <Card title=\"重复持仓\" style={{marginTop: 16}}>\n        <Table\n          pagination={false}\n          loading={loading}\n          className=\"fund-list-nested\"\n          columns={stockColumns('stock')}\n          dataSource={stockSimilarity}\n          locale={{\n            emptyText: '无重复持仓'\n          }}\n        />\n      </Card>\n      <Card title=\"行业集中度分析\" style={{marginTop: 16}}>\n        <Table\n          pagination={false}\n          loading={loading}\n          className=\"fund-list-nested\"\n          columns={stockColumns('industry')}\n          dataSource={industrySimilarity}\n          locale={{\n            emptyText: '无重复行业'\n          }}\n        />\n      </Card>\n    </div>\n  )\n}\n\nexport default connect((state) => state)(Similarity as any);\n\n\n","import { combineReducers } from 'redux'\nimport funds from './funds';\n\nexport default combineReducers({\n  funds,\n})\n","export default (state = [], action) => {\n  switch (action.type) {\n    case 'UPDATE':\n        return action.funds;\n    default:\n      return state;\n  }\n}\n","import React from 'react';\nimport { Layout, Card } from 'antd';\nimport FundList from 'src/components/fundList';\nimport Similarity from 'src/components/similarity';\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport 'antd/dist/antd.css';\n\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer);\n\nconst { Content } = Layout;\n\nfunction App() {\n  console.log(\"%c+\",\n  `font-size: 1px;\n  padding: 122px 217px;\n  background-image: url(https://i01piccdn.sogoucdn.com/982a9917ddc1a5b2);\n  background-size: contain;\n  background-repeat: no-repeat;\n  color: transparent;`);\n  console.log('Joy, you are the apple of my eyes.');\n  return (\n    <Provider store={store}>\n      <Router>\n        <div className=\"App\">\n          <Layout style={{ minHeight: '100vh' }}>\n            <Content>\n              <Card\n                title=\"X-FUND\"\n                bordered={false}\n                extra={<span style={{ color: '#999', fontWeight: 400 }}>个人基金工具，数据来源天天基金、东方财富网</span>}\n              >\n                <Switch>\n                  <Route path=\"/similarity\">\n                    <Similarity />\n                  </Route>\n                  <Route path=\"/:codes\">\n                    <FundList />\n                  </Route>\n                  <Route path=\"/\">\n                    <FundList />\n                  </Route>\n                </Switch>\n              </Card>\n            </Content>\n          </Layout>\n        </div>\n      </Router>\n    </Provider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}